% Generated by tools/generate-man.R -- do not edit by hand
\name{lock}
\alias{lock}
\alias{unlock}
\title{File Locking}
\description{
Creates a lock file.
}
\usage{
lock(lockfile, timeout = 60)
unlock(lockfile)
}
\arguments{
  \item{lockfile}{Lock file path.}
  \item{timeout}{Timeout in seconds. }
}
\value{
TRUE if lock acquired. 
}
\seealso{

Other io: \code{\link{locate}}, \code{\link{read.csv}}, \code{\link{Riolog}}, \code{\link{touch}}, \code{\link{write.csv}}
}
\examples{
\dontrun{
# Acquire a lock, do work, then release it
lockfile <- tempfile(fileext = ".lock")
if (iaw$lock(lockfile)) {
  message("Lock acquired, doing work...")
  # ... critical section ...
  iaw$unlock(lockfile)
} else {
  message("Could not acquire lock within timeout")
}

# Short timeout for non-blocking attempt
acquired <- iaw$lock(lockfile, timeout = 1)
if (acquired) iaw$unlock(lockfile)

# Guard a shared cache file during parallel writes
cache_lock <- "/tmp/model_cache.lock"
if (iaw$lock(cache_lock, timeout = 30)) {
  saveRDS(results, "/tmp/model_cache.rds")
  iaw$unlock(cache_lock)
}

# Use tryCatch to guarantee unlock even if work fails
lf <- tempfile(fileext = ".lock")
if (iaw$lock(lf, timeout = 10)) {
  tryCatch({
    # ... critical section ...
  }, finally = iaw$unlock(lf))
}
}

}
